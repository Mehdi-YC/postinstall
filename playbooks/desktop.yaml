  - name: Desktop
    hosts: localhost
    tasks:

      - name: add vscodium repo with rpmkeys
        become: true
        shell: |
              rpmkeys --import https://gitlab.com/paulcarroty/vscodium-deb-rpm-repo/-/raw/master/pub.gpg
              printf "[gitlab.com_paulcarroty_vscodium_repo]\nname=download.vscodium.com\nbaseurl=https://download.vscodium.com/rpms/\nenabled=1\ngpgcheck=1\nrepo_gpgcheck=1\ngpgkey=https://gitlab.com/paulcarroty/vscodium-deb-rpm-repo/-/raw/master/pub.gpg\nmetadata_expire=1h" | sudo tee -a /etc/yum.repos.d/vscodium.repo
        tags: minimal
            
      - name: install i3 + config
        become: true
        package:
          name: 
            - codium
            - i3
            - i3status
            - picom
            - xfce4-panel
            - dunst
            - flameshot
          state: present
        tags: minimal



      - name: Install Flatpak and vscode if necessary
        become: true
        package:
          name: 
            - flatpak
          state: present


      - name: Install vscodium extensions
        command: codium --install-extension "{{ item }}"
        with_items:
          - asvetliakov.vscode-neovim
          - bradlc.vscode-tailwindcss
          - innoverio.vscode-dbt-power-user
          - jdinhlife.gruvbox
          - ms-python.python
          - ms-toolsai.jupyter
          - ms-toolsai.jupyter-keymap
          - ms-toolsai.jupyter-renderers
          - ms-toolsai.vscode-jupyter-cell-tags
          - ms-toolsai.vscode-jupyter-slideshow
          - mtxr.sqltools
          - mtxr.sqltools-driver-pg
          - mtxr.sqltools-driver-sqlite
          - PKief.material-icon-theme
          - rust-lang.rust
          - rust-lang.rust-analyzer
          - s-nlf-fh.glassit
          - sainnhe.gruvbox-material
          - samuelcolvin.jinjahtml
          - svelte.svelte-vscode
          - tamasfe.even-better-toml
          - ultram4rine.sqltools-clickhouse-driver
          - vscodevim.vim
          - yandeu.five-server




      - name: Install Flatpak Apps
        become: true
        flatpak:
          name:
            - rest.insomnia.Insomnia
            - org.pitivi.Pitivi
            - org.remmina.Remmina
            - org.gimp.GIMP
            - org.inkscape.Inkscape
            - com.discordapp.Discord
            - org.mozilla.firefox
            - com.valvesoftware.Steam
            - io.dbeaver.DBeaverCommunity
            - net.cozic.joplin_desktop
          method: system
          state: present